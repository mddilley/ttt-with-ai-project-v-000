#!/usr/bin/env ruby

require_relative '../config/environment'

def run_game(input)
  if input == "0"
    computer_game = Game.new(Players::Computer.new(player_one), Players::Computer.new(player_two))
    computer_game.play
  elsif input == "1"
    one_player_game = Game.new(Players::Human.new(player_one), Players::Computer.new(player_two))
    one_player_game.play
  elsif input == "2"
    two_player_game = Game.new(Players::Human.new(player_one), Players::Human.new(player_two))
    two_player_game.play
  elsif input == "wargames"
    win_count = 0
    100.times {
      wopr_game = Game.new(Players::Computer.new(player_one), Players::Computer.new(player_two))
      wopr_game.play
      win_count += 1 if wopr_game.won?
    }
    puts "#{win_count}"
  else
    puts "Please enter 0, 1, 2, or wargames"
    select_game
  end
end

def select_game
  input = gets.strip
  puts "Player one, would you like to play as X or O?"
  player_one = gets.strip

  if player_one == "X"
    player_two = "O"
  elsif player_one == "O"
    player_two = "X"
  else
    puts "Please enter X or O"
  end

  if input == "0"
    computer_game = Game.new(Players::Computer.new(player_one), Players::Computer.new(player_two))
    computer_game.play
  elsif input == "1"
    one_player_game = Game.new(Players::Human.new(player_one), Players::Computer.new(player_two))
    one_player_game.play
  elsif input == "2"
    two_player_game = Game.new(Players::Human.new(player_one), Players::Human.new(player_two))
    two_player_game.play
  elsif input == "wargames"
    win_count = 0
    100.times {
      wopr_game = Game.new(Players::Computer.new(player_one), Players::Computer.new(player_two))
      wopr_game.play
      win_count += 1 if wopr_game.won?
    }
    puts "#{win_count}"
  else
    puts "Please enter 0, 1, 2, or wargames"
    select_game
  end
  puts "Great job! Would you like to play another game or quit?"
  puts "Please enter: repeat or quit"
  repeat = gets.strip
  if repeat == "repeat"
    select_game
  elsif repeat == "quit"
    return
  else
    puts "Please enter: repeat or quit"
end

puts "Welcome to Tic-tac-toe!"
puts "Would you like to play a 0, 1, or 2 player game?"
puts "At risk of the world, enter wargames!"
select_game
